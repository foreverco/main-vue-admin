<template>
  <div>
    <BaseTitle moduleTitle="设备区域统计">
      <span slot="right" class="option">
        <el-form>
          <SensorPicker
            :sensorPickerLevel="['largeArea', 'areas']"
            :sensorData="sensorData"
            v-on:update:sensorData="sensorData = $event"
          ></SensorPicker>
          <!-- {{ sensorData }} -->
        </el-form>
      </span>
    </BaseTitle>
    <ul class="deveice_area" v-if="option.length">
      <li v-for="(item, index) in option" :key="index">
        <Echars :option="option[index]"></Echars>
      </li>
    </ul>
    <ul class="deveice_area" v-else>
      <p>暂无数据</p>
    </ul>
  </div>
</template>
<script>
import BaseTitle from "../../../../components/common/BaseTitle.vue";
import SensorPicker from "../../../../components/SensorPicker/index";
import Echars from "../../../../components/echarts/echarts_monitoring.vue";
import { deveiceAreaStatistics } from "../../../../api/monitoring.js";
import { getChartOption } from "../../../../utils/mapUtil.js";
export default {
  components: {
    BaseTitle,
    SensorPicker,
    Echars
  },
  data() {
    return {
      sensorData: {},
      // 图表配置项
      option: [],
      option1: [
        {
          title: "大标题",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [13, 26, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题2",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [55, 20, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题3",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [13, 26, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题4",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [55, 20, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题5",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [13, 26, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题6",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [55, 20, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题7",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [13, 26, 27, 35, 21, 21, 25]
        },
        {
          title: "大标题8",
          x: ["0:00", "4:00", "8:00", "12:00", "16:00", "20:00", "24:00"], // x轴
          data: [13, 26, 27, 35, 21, 21, 25]
        }
      ]
    };
  },
  mounted() {},
  watch: {
    "sensorData.areasValue": {
      handler: function(val) {
        // console.log(val);
        this.getChartData(val);
      },
      deep: true
    }
  },
  methods: {
    getChartData(areasValue) {
      // let data = "321fb20d38391d25e651026e9db79de6";
      let data = areasValue || "";
      // 调用曲线图数据
      deveiceAreaStatistics(data)
        .then(res => {
          let deveice = res.data.data;
          this.option = getChartOption(deveice, 0);
          console.log(res);
        })
        .catch(error => {
          console.log(error);
        });
    }
  }
};
</script>
<style lang="scss" scoped>
@import "@/styles/reset.scss";
.option {
  float: right;
  // margin-right: 2%;
  width: 60%;
}
.deveice_area {
  width: 100%;
  height: auto;
  display: flex;
  display: -webkit-flex;
  flex-direction: row;
  flex-wrap: wrap;
  // border: 1px solid red;
}
.deveice_area p {
  line-height: 60px;
  width: 30%;
  margin: 0 auto;
  text-align: center;
  color: #909399;
}
.deveice_area li {
  margin: 1%;
  width: 23%;
  height: 250px;
  border-radius: 8px;
  background: #ededed;
}
</style>
