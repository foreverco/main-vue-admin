<template>
  <div class="mainPage">
    <div class="layout_top">
      <div class="layout_top_left">
        <div>
          <BaseTitle moduleTitle="设备在线情况" />
          <div class="equipment_online">
            <EquipmentCard />
          </div>
        </div>
        <div class="monitor">
          <div class="monitor_left">
            <BaseTitle moduleTitle="环境监控" />
            <div class="huanjing_monitor">
              <Player />
            </div>
            <EquipmentMsg />
          </div>
          <div class="monitor_right">
            <BaseTitle moduleTitle="视频监控" />
            <div class="video_monitor">
              <div><Player /></div>
              <div><Player /></div>
              <div><Player /></div>
              <div><Player /></div>
            </div>
          </div>
        </div>
      </div>
      <div class="layout_top_right">
        <BaseTitle moduleTitle="今日天气状况" />
        <div class="today_weather">
          <div class="today_weather_header">
            <span><i class="iconfont icondizhi"></i>化德县长顺镇</span>
            <span>2020-5-12</span>
            <span>星期一</span>
          </div>
          <div class="today_weather_panel">
            <el-progress
              type="dashboard"
              :percentage="0"
              :width="100"
            ></el-progress>
            <img src="../../assets/mainpage/云.png" />
            <div class="teather_desc">
              <p>10°</p>
              <p>雷阵雨/空气中</p>
            </div>
          </div>
          <div class="weather_msg">
            <WeatherMsg />
          </div>
          <div class="weather_chart">
            <Echars :option="weatherOption" />
          </div>
        </div>
      </div>
    </div>
    <div class="layout_bottom">
      <div class="layout_bottom_left">
        <BaseTitle moduleTitle="设备采集趋势" />
        <div class="device_acquisition_trend">
          <DeveiceButton />
          <Echars :option="deviceAcquisitionOption"></Echars>
        </div>
      </div>
      <div class="layout_bottom_right">
        <BaseTitle moduleTitle="今日告警信息">
          <span slot="right"
            >告警数量
            <i class="iconfont iconyujing1" style="color: red;"></i>
          </span>
        </BaseTitle>
      </div>
    </div>
  </div>
</template>
<script>
import BaseTitle from "../../components/common/BaseTitle.vue";
import EquipmentCard from "./components/EquipmentCard.vue";
import EquipmentMsg from "./components/EquipmentMsg.vue";
import Player from "../../components/common/video.vue";
import Echars from "../../components/echarts/Echars.vue";
import DeveiceButton from "./components/DeveiceButton.vue";
import WarningList from "./components/WarningList.vue";
import WeatherMsg from "./components/WeatherMsg.vue";
import { ref, reactive } from "@vue/composition-api";
export default {
  components: {
    BaseTitle,
    EquipmentCard,
    EquipmentMsg,
    Player,
    WeatherMsg,
    Echars,
    DeveiceButton
  },
  setup() {
    const weatherOption = reactive({
      grid: {
        top: "10%",
        right: "5%",
        left: "5%",
        bottom: "5%"
      },
      xAxis: [
        {
          type: "category",
          data: ["现在", "测试", "1点", "2点", "3点", "4点", "5点"],
          show: false
        }
      ],
      yAxis: [
        {
          show: false
        }
      ],
      series: [
        {
          data: [13, 26, 27, 35, 21, 21, 25],
          type: "line",
          smooth: true,
          name: "折线图",
          symbol: "circle",
          symbolSize: 8,
          label: {
            normal: {
              offset: [0, 25],
              show: true,
              formatter: "{b}\n\n{c}°",
              color: "#fff"
            }
          }
        }
      ]
    });
    const deviceAcquisitionOption = reactive({
      legend: {
        itemWidth: 5, //图例的宽度
        itemHeight: 5, //图例的高度
        itemGap: 10,
        // orient: 'vertical',
        right: "2%",
        top: "top",
        selectedMode: false, //取消图例上的点击事件
        data: [
          {
            icon: "roundRect",
            name: "患者数"
          },
          {
            icon: "roundRect",
            name: "新增报告数"
          }
        ]
      },
      grid: {
        left: "20",
        right: "30",
        bottom: "15%",
        containLabel: true
      },
      tooltip: {
        trigger: "axis",
        axisPointer: {
          // 坐标轴指示器，坐标轴触发有效
          type: "line" // 默认为直线，可选为：'line' | 'shadow'
        }
      },
      xAxis: {
        boundaryGap: false, //x轴从0开始到结束显示
        data: ["12.1", "12.2", "12.3", "12.4", "12.5", "12.6", "12.7"],
        splitLine: {
          show: false
        }, //去除网格线
        splitArea: {
          show: false
        }, //保留网格区域
        axisTick: {
          show: false
        },
        axisLabel: {
          interval: 0, //隔几个显示
          rotate: 30,
          showMinLabel: true,
          color: "#393C40"
        }
      },
      yAxis: {
        min: function(value) {
          return value.min - 0;
        },
        splitLine: {
          show: false
        }, //去除网格线
        splitArea: {
          show: false
        }, //保留网格区域
        axisLine: {
          show: true,
          lineStyle: {
            //轴上的线样式
            color: "#979797",
            width: 0.6 //这里是为了突出显示加上的
          }
          // symbol: ['none', 'arrow'],
          // symbolSize: [6, 12],
          // symbolOffset: [0, 8]
        },
        axisTick: {
          show: false
        }
      },
      series: [
        // For shadow
        {
          type: "line",
          showSymbol: true, //显示折线拐点
          smooth: true,
          itemStyle: {
            color: "#2390FF"
          }, //线条样式
          lineStyle: {
            color: "#2390FF"
          },
          areaStyle: {
            color: {
              type: "linear",
              x: 0,
              y: 0,
              x2: 0,
              y2: 1,
              colorStops: [
                {
                  offset: 0,
                  color: "#cae4ff" // 0% 处的颜色
                },
                {
                  offset: 1,
                  color: "#fff" // 100% 处的颜色
                }
              ],
              globalCoord: false // 缺省为 false
            }
          },
          name: "患者数",
          z: 10,
          // animation: true,
          data: [120, 132, 201, 134, 90, 230, 210]
        },
        {
          type: "line",
          showSymbol: true, //显示折线拐点
          smooth: true,
          itemStyle: {
            //点样式
            color: "#3143FE"
          }, //线条样式
          lineStyle: {
            //折线样式
            color: "#3143FE"
          },
          areaStyle: {
            //区域样式
            color: {
              type: "linear",
              x: 0,
              y: 0,
              x2: 0,
              y2: 1,
              colorStops: [
                {
                  offset: 0,
                  color: "#d1d5fe" // 0% 处的颜色
                },
                {
                  offset: 1,
                  color: "#fff" // 100% 处的颜色
                }
              ],
              globalCoord: false // 缺省为 false
            }
          },
          name: "新增报告数",
          // animation: true,
          data: [220, 232, 201, 234, 120, 330, 410]
        }
      ]
    });
    return {
      weatherOption,
      deviceAcquisitionOption
    };
  }
};
</script>
<style lang="scss" scoped>
@import "@/styles/reset.scss";
.mainPage {
  width: 100%;
  height: 100%;
  background-color: #f4f4f4;
  // border: 1px solid red;
}
.layout_top,
.layout_bottom {
  // border: 1px solid green;
  width: 100%;
  display: flex;
}
.layout_bottom {
  margin-top: 2.7vh;
}

.layout_top_left {
  // width: 90vw;
  width: 80%;
  // border: 1px solid pink;
  margin-right: 1.56vw;
}

.layout_top_right {
  // width: 20vw;
  width: 23%;
  position: relative;
  // border: 1px solid blue;
}

.equipment_online {
  // border: 1px solid red;
  margin-top: 1.2%;
}

.layout_bottom_left {
  width: 57vw;
  // border: 1px solid pink;
}
/*监控开始*/
.monitor {
  // border: 1px solid blue;
  margin-top: 2.3%;
  display: flex;
  justify-content: space-between;
}

.monitor_left,
.monitor_right {
  // border: 1px solid red;
}

.monitor_left {
  width: 46%;
}
.huanjing_monitor {
  margin-top: 3%;
  // border: 1px solid red;
}
.monitor_right {
  width: 52%;
  // border: 1px solid red;
  position: relative;
}
.video_monitor {
  margin-top: 3%;
  // display: grid;
  // grid-template-columns: 48% 48%;
  // grid-template-rows: 50% 50% auto;
  // grid-column-gap: 4%;
  // // grid-row-gap: 8%;
  // grid-row-gap: 17px;
  border: 1px solid green;
}
.video_monitor > div {
  width: 48%;
  float: left;
  position: absolute;
}
.video_monitor > div:nth-child(even) {
  margin-left: 4%;
}
.video_monitor > div:nth-child(1) {
  left: 0;
}
.video_monitor > div:nth-child(2) {
  right: 0;
}
.video_monitor > div:nth-child(3) {
  bottom: 0;
  left: 0;
}
.video_monitor > div:nth-child(4) {
  bottom: 0;
  right: 0;
}
/*监控结束*/

/*天气开始*/
.today_weather {
  height: 94%;
  width: 100%;
  margin-top: 5.8%;
  position: absolute;
  bottom: 0;
  background-color: #262b40;
  border-radius: 8px;
  background-image: url(../../assets/mainpage/cloudbg.png);
  background-repeat: no-repeat;
  background-position: 98% 18%;
}
.today_weather_header {
  // border: 1px solid red;
  color: #fff;
  padding-top: 7.63%;
  // font-size: 1.18rem;
  font-size: 1.3vh;
}
.icondizhi {
  font-size: 12px;
}
.today_weather_header > span:nth-child(2) {
  margin-left: 1.35vw;
}
.today_weather_header > span:last-child {
  margin-left: 1.35vw;
}
.today_weather_panel {
  // border: 1px solid red;
  margin-top: 18.6%;
  position: relative;
}
.today_weather_panel > img {
  width: 3.1vw;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.teather_desc {
  color: #fff;
  position: absolute;
  top: 50%;
  width: 6vw;
  left: 50%;
  transform: translate(-50%, 45%);
}
.teather_desc > p:first-child {
  font-size: 1.41vw;
  font-weight: 400;
}
.teather_desc > p:last-child {
  font-size: 0.95vw;
  color: #e6b757;
}
.weather_msg {
  // border: 1px solid red;
  margin-top: 15%;
}
.weather_chart {
  // border: 1px solid red;
  height: 28.98%;
}
/*天气结束*/
/*设备采集趋势*/
.device_acquisition_trend {
  width: 57vw;
  height: 38vh;
  position: relative;
}
/*今日告警信息*/
.layout_bottom_right {
  width: 29vw;
  border: 1px solid blue;
}
.layout_bottom_right > span {
  border: 1px solid red;
}
</style>
